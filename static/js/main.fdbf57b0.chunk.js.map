{"version":3,"sources":["assets/images/carleton.svg","redux/store/store.js","components/Logo/Logo.js","components/Confirmation/Confirmation.js","hooks/useStore.js","hooks/useWindowSize.js","hooks/useActions.js","components/Button/Button.js","components/FileUploader/FileUploader.js","components/ToolViewer/ToolViewer.js","components/Main/UserMenu.js","components/Main/Main.js","components/Toast/Toast.js","components/ToastContext/ToastContext.js","components/Root/Root.js","components/Root/index.js","redux/store/index.js","index.js","services/StorageService.js","redux/actions/index.js","redux/slices/theme.js","redux/slices/tool.js","redux/slices/index.js"],"names":["module","exports","store","configureStore","preloadedState","storageService","get","reducer","reducers","middleware","process","getDefaultMiddleware","subscribe","set","getState","dehydrateStore","useStyles","makeStyles","theme","root","background","padding","spacing","Logo","width","height","className","style","classes","alt","clsx","src","logo","defaultProps","undefined","Confirmation","content","onConfirm","onClose","open","useTranslation","t","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","color","onClick","autoFocus","useStore","selector","equality","useSelector","_","isFunction","state","isArray","pick","useWindowSize","isClient","isObject","window","getSize","innerWidth","innerHeight","useState","windowSize","setWindowSize","handleResize","useMount","addEventListener","useUnmount","removeEventListener","useActions","storeName","actions","storeActions","dispatch","useDispatch","reduce","accumulator","functionDefinition","functionName","inline","display","alignItems","props","loading","setLoading","children","disabled","variant","isMounted","useMountedState","propsToSpread","startIcon","endIcon","Box","a","CircularProgress","data-testid","size","error","palette","main","FileUploader","onSave","acceptedFiles","title","React","setOpen","flexDirection","filesLimit","maxFileSize","Infinity","files","showPreviews","Typography","message","justifyContent","jsonViewer","position","border","margin","minWidth","svgViewer","loadButton","bottom","right","svgConnectionsButton","left","svgButtonTopButtonContainer","picklist","assignButton","cards","flexWrap","alignContent","overflow","card","cursor","previewCard","selectedCards","svgContainer","marginTop","marginLeft","marginRight","svg","objectFit","jsonView","cardContainer","button","textTransform","svgPopup","Viewer","jsonContent","svgContent","picklistValue","picklistOptions","selectedSvgElements","setJsonContent","setSvgContent","setPicklistValue","setPicklistOptions","setSelectedCards","setSelectedSvgElements","reset","openConfirmation","setOpenConfirmation","openJsonPreview","setOpenJsonPreview","openCardToSvgConnectionPreview","setOpenCardToSvgConnectionPreview","selectedPopup","setSelectedPopup","popupStrokeMap","setPopupStrokeMap","openSvgToCardConnectionPreview","setOpenSvgToCardConnectionPreview","selectedCardsRef","useRef","current","selectedSvgElementsRef","popupStrokeMapRef","selectedPopupRef","useEffect","setTimeout","d3","select","selectAll","each","index","this","attr","on","id","selections","stroke","elem","readFileAsUrl","file","Promise","resolve","fileReader","FileReader","onload","result","readAsDataURL","clearSelections","elementProps","readFileAsJson","text","JSON","parse","onJsonFileUpload","jsonFile","options","Object","keys","onSvgFileUpload","url","onCardClick","key","isEmpty","onSeeCardConnection","data","Array","length","svgElementIdSet","Set","strokeMap","has","currentStroke","onAssign","clonedJsonContent","cloneDeep","value","map","getCardContent","push","p","Select","defaultValue","onChange","event","target","option","MenuItem","Tooltip","IconButton","Visibility","Card","CardContent","Check","Refresh","svgEl","document","getElementById","setAttribute","svgData","outerHTML","svgBlob","Blob","type","zip","JSZip","stringify","generateAsync","then","FileSaver","saveAs","fullScreen","pl","pr","values","segments","forEach","v","includes","Accordion","AccordionSummary","expandIcon","ExpandMore","AccordionDetails","getConnectedCardsForSvg","marginBottom","outlineStyle","UserMenu","displayName","dropdowns","anchorEl","setAnchorEl","handleClose","hasDropdowns","filter","dropdown","currentTarget","onKeyDown","role","tabIndex","Menu","anchorOrigin","vertical","horizontal","elevation","getContentAnchorEl","keepMounted","Boolean","transformOrigin","handler","Icon","toolbar","paddingLeft","paddingRight","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","paddingTop","Main","dimensions","themeActions","isDark","AppBar","Toolbar","hide","Link","href","textDecoration","setMode","ToolViewer","Toast","Snackbar","autoHideDuration","Alert","severity","Context","createContext","noop","success","warning","info","ToastContext","orientation","orientationFragment","split","initialState","setState","stateRef","Provider","s","_event","reason","Root","ThemeProvider","createMuiTheme","CssBaseline","App","I18nextProvider","i18n","i18next","init","interpolation","escapeValue","lng","resources","en","common","commonEn","ReactDOM","render","$appData","localStorage","getItem","err","setItem","freeze","createAction","matchMedia","matches","primary","contrastText","secondary","createSlice","name","action","payload","extraReducers","assign","selecedCards","tool"],"mappings":"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","file":"static/js/main.fdbf57b0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/carleton.0bbc27c1.svg\";","import logger from 'redux-logger';\nimport {\n    configureStore,\n    getDefaultMiddleware,\n} from '@reduxjs/toolkit';\nimport { reducers } from '../slices';\nimport { storage as storageService } from '../../services';\n\nfunction rehydrateStore() {\n    return storageService.get();\n}\n\nfunction dehydrateStore(store) {\n    storageService.set(store.getState());\n}\n\nconst store = configureStore({\n    preloadedState: rehydrateStore(),\n    reducer: reducers,\n    middleware: process && process.env && process.env.NODE_ENV === 'development'\n        ? [\n            ...getDefaultMiddleware(),\n            logger,\n        ]\n        : [...getDefaultMiddleware()],\n});\n\nstore.subscribe(() => dehydrateStore(store));\n\nexport default store;\n","import React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport logo from '../../assets/images/carleton.svg';\n\nexport const useStyles = makeStyles(theme => ({\n    root: {\n        background: 'white',\n        padding: theme.spacing(1),\n    },\n}));\n\nconst Logo = ({ width, height, className, style }) => {\n    const classes = useStyles();\n    return (\n        <img\n            alt='Carleton University'\n            className={clsx(className, classes.root)}\n            height={height}\n            src={logo}\n            style={style}\n            width={width}\n        />\n    );\n};\n\nLogo.propTypes = {\n    height: PropTypes.number,\n    width: PropTypes.number,\n    className: PropTypes.string,\n    style: PropTypes.object,\n};\n\nLogo.defaultProps = {\n    height: 64,\n    width: 250,\n    className: '',\n    style: undefined,\n};\n\nexport default Logo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    DialogTitle,\n} from '@material-ui/core';\n\nfunction Confirmation({\n    content,\n    onConfirm,\n    onClose,\n    open,\n}) {\n    const [t] = useTranslation('common');\n    return (\n        <Dialog\n            onClose={onClose}\n            open={open}\n        >\n            <DialogTitle>{t('confirmation.title')}</DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    {content}\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    color='primary'\n                    onClick={onConfirm}\n                >\n                    {t('confirmation.ok')}\n                </Button>\n                <Button\n                    autoFocus\n                    color='primary'\n                    onClick={onClose}\n                >\n                    {t('confirmation.cancel')}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n\nConfirmation.propTypes = {\n    content: PropTypes.oneOfType([\n        PropTypes.node,\n        PropTypes.string,\n    ]).isRequired,\n    onConfirm: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    open: PropTypes.bool.isRequired,\n};\n\nexport default Confirmation;\n","import { useSelector } from 'react-redux';\nimport _ from 'lodash';\n\nexport default function useStore(selector, equality) {\n    const store = useSelector(\n        _.isFunction(selector)\n            ? selector\n            : state => (!_.isArray(selector) ? state[selector] : _.pick(state, selector)),\n        equality,\n    );\n    return store || {};\n}\n","import { useState } from 'react';\nimport { useMount, useUnmount } from 'react-use';\nimport _ from 'lodash';\n\nexport default function useWindowSize() {\n    const isClient = _.isObject(window);\n\n    const getSize = () => ({\n        width: isClient ? window.innerWidth : undefined,\n        height: isClient ? window.innerHeight : undefined,\n    });\n\n    const [windowSize, setWindowSize] = useState(getSize);\n\n    const handleResize = () => setWindowSize(getSize());\n\n    useMount(() => {\n        if (isClient) {\n            window.addEventListener('resize', handleResize);\n        }\n    });\n\n    useUnmount(() => window.removeEventListener('resize', handleResize));\n\n    return windowSize;\n}\n","import { useDispatch } from 'react-redux';\nimport _ from 'lodash';\nimport { actions as storeActions } from '../redux/slices';\n\nexport default function useActions(storeName) {\n    let actions = storeActions[storeName];\n    const dispatch = useDispatch();\n    actions = _.reduce(actions, (accumulator, functionDefinition, functionName) => {\n        accumulator[functionName] = (...args) => dispatch(functionDefinition(...args));\n        return accumulator;\n    }, {});\n    return actions || {};\n}\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport MuiButton from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport clsx from 'clsx';\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useMountedState } from '../../hooks';\n\nexport const useStyles = makeStyles(() => ({\n    inline: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n}));\n\nfunction Button(props) {\n    const classes = useStyles();\n    const [loading, setLoading] = useState(false);\n    const { className, children, onClick, disabled, inline, variant } = props;\n    const isMounted = useMountedState();\n    const propsToSpread = { ...props };\n    delete propsToSpread.className;\n    delete propsToSpread.disabled;\n    delete propsToSpread.onClick;\n    delete propsToSpread.inline;\n    delete propsToSpread.variant;\n    const { startIcon, endIcon } = propsToSpread;\n    delete propsToSpread.startIcon;\n    delete propsToSpread.endIcon;\n    return (\n        <Box\n            className={clsx({ [classes.inline]: inline })}\n            display='inline'\n        >\n            {\n                startIcon == null && endIcon == null\n                    ? (\n                        <>\n                            <MuiButton\n                                className={className}\n                                disabled={loading || disabled}\n                                onClick={\n                                    typeof onClick === 'function'\n                                        ? async () => {\n                                            setLoading(true);\n                                            try {\n                                                await onClick();\n                                            } catch (err) {} finally {\n                                                if (isMounted()) {\n                                                    setLoading(false);\n                                                }\n                                            }\n                                        }\n                                        : undefined\n                                }\n                                variant={!inline ? (variant || 'contained') : undefined}\n                                {...propsToSpread}\n                            >\n                                {!loading && !inline && children}\n                                {inline && children}\n                                {!inline && loading && (\n                                    <CircularProgress\n                                        data-testid='button-default-spinner'\n                                        size={25}\n                                    />\n                                )}\n                            </MuiButton>\n                            {loading && inline && (\n                                <CircularProgress\n                                    data-testid='button-inline-spinner'\n                                    size={35}\n                                />\n                            )}\n                        </>\n                    )\n                    : (\n                        <MuiButton\n                            className={className}\n                            disabled={loading || disabled}\n                            {...propsToSpread}\n                            endIcon={!loading ? endIcon : endIcon && (\n                                <CircularProgress\n                                    data-testid='button-start-icon-spinner'\n                                    size={25}\n                                />\n                            )}\n                            onClick={\n                                typeof onClick === 'function'\n                                    ? async () => {\n                                        setLoading(true);\n                                        try {\n                                            await onClick();\n                                        } catch (err) {} finally {\n                                            if (isMounted()) {\n                                                setLoading(false);\n                                            }\n                                        }\n                                    }\n                                    : undefined\n                            }\n                            startIcon={!loading ? startIcon : startIcon && (\n                                <CircularProgress\n                                    data-testid='button-end-icon-spinner'\n                                    size={18}\n                                />\n                            )}\n                            variant={variant}\n                        />\n                    )\n            }\n        </Box>\n    );\n}\n\nButton.propTypes = {\n    children: PropTypes.node.isRequired,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    onClick: PropTypes.func,\n    inline: PropTypes.bool,\n    variant: PropTypes.string,\n};\n\nButton.defaultProps = {\n    onClick: undefined,\n    disabled: undefined,\n    className: '',\n    inline: false,\n    variant: undefined,\n};\n\nexport default Button;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Box, makeStyles, Typography } from '@material-ui/core';\nimport { DropzoneDialog } from 'material-ui-dropzone';\nimport Button from '../Button';\n\nexport const useStyles = makeStyles(theme => ({ error: { color: theme.palette.error.main } }));\n\nconst FileUploader = ({\n    className,\n    style,\n    onSave,\n    error,\n    acceptedFiles,\n    title,\n}) => {\n    const classes = useStyles();\n    const [open, setOpen] = React.useState(false);\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const handleSave = files => {\n        setOpen(false);\n        onSave(files);\n    };\n\n    const handleOpen = () => {\n        setOpen(true);\n    };\n\n    return (\n        <Box\n            alignItems='center'\n            className={className}\n            display='flex'\n            flexDirection='row'\n            style={style}\n        >\n            <Button\n                color='primary'\n                onClick={handleOpen}\n            >\n                {title}\n            </Button>\n            <DropzoneDialog\n                acceptedFiles={acceptedFiles}\n                filesLimit={1}\n                maxFileSize={Infinity}\n                onClose={handleClose}\n                onSave={handleSave}\n                open={open}\n                showPreviews\n            />\n            {error && <Typography className={classes.error}>{error.message}</Typography>}\n        </Box>\n    );\n};\n\nFileUploader.propTypes = {\n    className: PropTypes.string,\n    style: PropTypes.object,\n    onSave: PropTypes.func.isRequired,\n    error: PropTypes.oneOfType([\n        PropTypes.object,\n        PropTypes.bool,\n    ]),\n    acceptedFiles: PropTypes.array,\n    title: PropTypes.string,\n};\n\nFileUploader.defaultProps = {\n    className: '',\n    style: {},\n    error: undefined,\n    acceptedFiles: [],\n    title: undefined,\n};\n\nexport default FileUploader;\n","import React from 'react';\nimport {\n    Box,\n    IconButton,\n    Tooltip,\n    Select,\n    MenuItem,\n    Card,\n    CardContent,\n    Dialog,\n    DialogActions,\n    Accordion,\n    AccordionSummary,\n    AccordionDetails,\n    Typography,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SVG from 'react-inlinesvg';\nimport {\n    Check as CheckIcon,\n    Refresh as RefreshIcon,\n    GetApp as DownloadIcon,\n    Visibility as VisibilityIcon,\n    ExpandMore as ExpandMoreIcon,\n} from '@material-ui/icons';\nimport Highlight from 'react-highlight';\nimport { useTranslation } from 'react-i18next';\nimport _ from 'lodash';\nimport clsx from 'clsx';\nimport * as d3 from 'd3';\nimport JSZip from 'jszip';\nimport FileSaver from 'file-saver';\nimport Button from '../Button';\nimport Confirmation from '../Confirmation';\nimport FileUploader from '../FileUploader';\nimport {\n    useStore,\n    useActions,\n} from '../../hooks';\n\nexport const useStyles = makeStyles(theme => ({\n    root: {\n        height: '100%',\n        width: '100%',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: 10,\n    },\n    jsonViewer: {\n        position: 'relative',\n        border: '1px solid black',\n        height: '100%',\n        width: '100%',\n        margin: 10,\n        minWidth: 450,\n    },\n    svgViewer: {\n        position: 'relative',\n        border: '1px solid black',\n        height: '100%',\n        width: '100%',\n        margin: 10,\n        minWidth: 450,\n    },\n    loadButton: {\n        position: 'absolute',\n        bottom: 0,\n        right: 0,\n        margin: 10,\n    },\n    svgConnectionsButton: {\n        position: 'absolute',\n        bottom: 0,\n        left: 0,\n        margin: 10,\n    },\n    svgButtonTopButtonContainer: {\n        display: 'flex',\n        justifyContent: 'space-between',\n    },\n    picklist: {\n        margin: 10,\n        minWidth: 150,\n    },\n    assignButton: { margin: 10 },\n    cards: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'center',\n        alignContent: 'flex-start',\n        height: '90%',\n        overflow: 'auto',\n    },\n    card: {\n        minWidth: 180,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        margin: 10,\n        cursor: 'pointer',\n        border: '1px solid white',\n    },\n    previewCard: {\n        minWidth: 180,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        margin: 10,\n        border: '1px solid white',\n    },\n    selectedCards: { border: '1px solid tomato' },\n    svgContainer: {\n        background: '#ffffff',\n        marginTop: theme.spacing(5),\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        padding: theme.spacing(2),\n    },\n    svg: {\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover',\n        overflow: 'hidden',\n    },\n    jsonView: { padding: 10 },\n    cardContainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    button: { textTransform: 'none' },\n    svgPopup: {\n        background: '#ffffff',\n        padding: 10,\n    },\n}));\n\nfunction Viewer() {\n    const classes = useStyles();\n    const [t] = useTranslation('common');\n    const {\n        jsonContent,\n        svgContent,\n        picklistValue,\n        picklistOptions,\n        selectedCards,\n        selectedSvgElements,\n    } = useStore('tool');\n    const {\n        setJsonContent,\n        setSvgContent,\n        setPicklistValue,\n        setPicklistOptions,\n        setSelectedCards,\n        setSelectedSvgElements,\n        reset,\n    } = useActions('tool');\n    const [openConfirmation, setOpenConfirmation] = React.useState(false);\n    const [openJsonPreview, setOpenJsonPreview] = React.useState(false);\n    const [openCardToSvgConnectionPreview, setOpenCardToSvgConnectionPreview] = React.useState(false);\n    const [selectedPopup, setSelectedPopup] = React.useState({});\n    const [popupStrokeMap, setPopupStrokeMap] = React.useState({});\n    const [openSvgToCardConnectionPreview, setOpenSvgToCardConnectionPreview] = React.useState(false);\n\n    const selectedCardsRef = React.useRef(null);\n    selectedCardsRef.current = selectedCards;\n\n    const selectedSvgElementsRef = React.useRef(null);\n    selectedSvgElementsRef.current = selectedSvgElements;\n\n    const popupStrokeMapRef = React.useRef(null);\n    popupStrokeMapRef.current = popupStrokeMap;\n\n    const selectedPopupRef = React.useRef(null);\n    selectedPopupRef.current = selectedPopup;\n\n    React.useEffect(() => {\n        setTimeout(() => {\n            d3.select('#workspace-svg')\n                .select('g')\n                .selectAll('*')\n                .each(function(_, index) {\n                    d3.select(this).attr('id', `e-${index}`);\n                })\n                .on('click', function() {\n                    const { id } = this;\n                    if (id in selectedSvgElementsRef.current) {\n                        const selections = { ...selectedSvgElementsRef.current };\n                        d3.select(this)\n                            .attr('stroke', selections[id].stroke);\n                        delete selections[id];\n                        setSelectedSvgElements(selections);\n                    } else {\n                        const selections = { ...selectedSvgElementsRef.current };\n                        const elem = d3.select(this);\n                        selections[id] = {\n                            id,\n                            stroke: elem.attr('stroke'),\n                        };\n                        setSelectedSvgElements(selections);\n                        elem.attr('stroke', 'tomato');\n                    }\n                })\n                .each(function() {\n                    const { id } = this;\n                    if (id in selectedSvgElementsRef.current) {\n                        d3.select(this).attr('stroke', 'tomato');\n                    }\n                })\n                .attr('pointer-events', 'fill')\n                .style('cursor', 'pointer');\n        }, 0);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [svgContent, jsonContent]);\n\n    const readFileAsUrl = file => new Promise(resolve => {\n        const fileReader = new FileReader();\n        fileReader.onload = () => resolve(fileReader.result);\n        fileReader.readAsDataURL(file);\n    });\n\n    const clearSelections = () => {\n        setSelectedCards({});\n        _.each(selectedSvgElements, (elementProps, id) => {\n            const elem = d3.select(`#${id}`);\n            elem.attr('stroke', elementProps.stroke);\n        });\n        setSelectedSvgElements({});\n    };\n\n    const readFileAsJson = async file => {\n        const text = await file.text();\n        return JSON.parse(text);\n    };\n\n    const onJsonFileUpload = async files => {\n        const file = files[0];\n        const jsonFile = await readFileAsJson(file);\n        const options = Object.keys(jsonFile);\n        setPicklistOptions(options);\n        setJsonContent(jsonFile);\n    };\n\n    const onSvgFileUpload = async files => {\n        const file = files[0];\n        const url = await readFileAsUrl(file);\n        setSvgContent(url);\n    };\n\n    const onPicklistChange = event => {\n        setPicklistValue(event.target.value);\n        clearSelections();\n    };\n\n    const onCardClick = (index, key) => {\n        const selections = { ...selectedCardsRef.current };\n        if (index in selections) {\n            delete selections[index];\n        } else {\n            selections[index] = {\n                key,\n                index,\n            };\n        }\n        setSelectedCards(selections);\n        if (_.isEmpty(selections)) {\n            _.each(selectedSvgElementsRef.current, (elementProps, id) => {\n                d3.select(`#${id}`)\n                    .attr('stroke', elementProps.stroke);\n            });\n            setSelectedSvgElements({});\n        }\n    };\n\n    const onSeeCardConnection = (index, key) => {\n        setOpenCardToSvgConnectionPreview(true);\n        setSelectedPopup({ index, key });\n        const data = index === -1 ? jsonContent[key] : jsonContent[key][index];\n        if (data.svg == null || !Array.isArray(data.svg) || data.svg.length === 0) return;\n        const svgElementIdSet = new Set(data.svg);\n        const strokeMap = {};\n        setTimeout(() => {\n            d3.select('#popup-svg')\n                .select('g')\n                .selectAll('*')\n                .each(function(_, index) {\n                    const elem = d3.select(this);\n                    const id = `#e-${index}`;\n                    if (svgElementIdSet.has(id)) {\n                        const currentStroke = elem.attr('stroke');\n                        strokeMap[index] = currentStroke;\n                        elem.attr('stroke', 'tomato');\n                    }\n                });\n        }, 0);\n        setPopupStrokeMap(strokeMap);\n    };\n\n    const onRemoveCardConnection = () => {\n        const { index, key } = selectedPopupRef.current;\n        const strokeMap = popupStrokeMapRef.current;\n        const clonedJsonContent = _.cloneDeep(jsonContent);\n        const data = index === -1 ? clonedJsonContent[key] : clonedJsonContent[key][index];\n        if (data.svg == null || !Array.isArray(data.svg) || data.svg.length === 0) return;\n        data.svg = [];\n        setTimeout(() => {\n            d3.select('#popup-svg')\n                .select('g')\n                .selectAll('*')\n                .each(function(_, index) {\n                    const elem = d3.select(this);\n                    if (index in strokeMap) {\n                        elem.attr('stroke', strokeMap[index]);\n                    }\n                });\n        }, 0);\n        setJsonContent(clonedJsonContent);\n    };\n\n    const onSeeSvgConnection = () => {\n        setOpenSvgToCardConnectionPreview(true);\n    };\n\n    const onRefresh = () => {\n        setOpenConfirmation(true);\n    };\n\n    const onRefreshConfirm = () => {\n        setOpenConfirmation(false);\n        reset();\n    };\n\n    const onAssign = async () => {\n        if (_.isEmpty(selectedCardsRef.current) || _.isEmpty(selectedSvgElementsRef.current)) return;\n        await new Promise(resolve => {\n            const clonedJsonContent = _.cloneDeep(jsonContent);\n            _.each(selectedCardsRef.current, value => {\n                const { key, index } = value;\n                if (index === -1) {\n                    clonedJsonContent[key].svg = _.map(selectedSvgElementsRef.current, value => `#${value.id}`);\n                } else {\n                    clonedJsonContent[key][index].svg = _.map(selectedSvgElementsRef.current, value => `#${value.id}`);\n                }\n            });\n            setJsonContent(clonedJsonContent);\n            clearSelections();\n            setTimeout(resolve, 200);\n        });\n    };\n\n    const getCardContent = data => _.reduce(data, (accumulator, value, key) => {\n        if (Array.isArray(value)) return accumulator;\n        accumulator.push(\n            <Box\n                key={key}\n                p={0.5}\n            >\n                <b>{key}</b>\n                {`: ${value}`}\n            </Box>,\n        );\n        return accumulator;\n    }, []);\n\n    const showJson = () => {\n        setOpenJsonPreview(true);\n    };\n\n    const onDownload = () => {\n        const elem = document.getElementById('workspace-svg-container');\n        const svgEl = elem.children[0];\n        svgEl.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n        const svgData = svgEl.outerHTML;\n        const preface = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n';\n        const svgBlob = new Blob([preface, svgData], { type: 'image/svg+xml;charset=utf-8' });\n\n        const zip = JSZip();\n        zip.file('result.svg', svgBlob);\n        zip.file('result.json', JSON.stringify(jsonContent, null, 2));\n        zip.generateAsync({ type: 'blob' })\n            .then(content => {\n                FileSaver.saveAs(content, 'result.zip');\n            });\n    };\n\n    const getConnectedCardsForSvg = () => {\n        const { id } = Object.values(selectedSvgElementsRef.current)[0];\n        if (!jsonContent) return;\n        const keys = Object.keys(jsonContent);\n        const segments = [];\n        keys.forEach(key => {\n            const cards = [];\n            const value = jsonContent[key];\n            if (Array.isArray(value)) {\n                value.forEach(v => {\n                    if (Array.isArray(v.svg)) {\n                        if (v.svg.includes(`#${id}`)) {\n                            cards.push((\n                                <Box className={classes.cardContainer}>\n                                    <Card className={classes.previewCard}>\n                                        <CardContent>\n                                            {getCardContent(v)}\n                                        </CardContent>\n                                    </Card>\n                                </Box>\n                            ));\n                        }\n                    }\n                });\n            } else if (Array.isArray(value.svg)) {\n                if (value.svg.includes(`#${id}`)) {\n                    cards.push((\n                        <Box className={classes.cardContainer}>\n                            <Card className={classes.previewCard}>\n                                <CardContent>\n                                    {getCardContent(value)}\n                                </CardContent>\n                            </Card>\n                        </Box>\n                    ));\n                }\n            }\n            if (cards.length === 0) return;\n            segments.push((\n                <Accordion>\n                    <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                        <Typography>{key}</Typography>\n                    </AccordionSummary>\n                    <AccordionDetails className={classes.cards}>\n                        {cards}\n                    </AccordionDetails>\n                </Accordion>\n            ));\n        });\n\n        if (segments.length === 0) {\n            return (\n                <Box\n                    alignItems='center'\n                    display='flex'\n                    height={200}\n                    justifyContent='center'\n                    width={300}\n                >\n                    {t('svgViewer.noConnections')}\n                </Box>\n            );\n        }\n\n        return segments;\n    };\n\n    return (\n        <>\n            <Box className={classes.root}>\n                <Box className={classes.jsonViewer}>\n                    <Box>\n                        <Select\n                            className={classes.picklist}\n                            defaultValue={picklistValue}\n                            disabled={!(picklistOptions.length > 0)}\n                            onChange={onPicklistChange}\n                        >\n                            {picklistOptions.map((option, index) => (\n                                <MenuItem\n                                    key={index}\n                                    value={option}\n                                >\n                                    {option}\n                                </MenuItem>\n                            ))}\n                        </Select>\n                        <Tooltip title={t('jsonViewer.showJson')}>\n                            <IconButton\n                                disabled={!jsonContent}\n                                onClick={showJson}\n                            >\n                                <VisibilityIcon />\n                            </IconButton>\n                        </Tooltip>\n                    </Box>\n                    {picklistValue && (\n                        <Box className={classes.cards}>\n                            {!Array.isArray(jsonContent[picklistValue]) && (\n                                <Box className={classes.cardContainer}>\n                                    <Card\n                                        className={clsx(classes.card, { [classes.selectedCards]: selectedCards[-1] })}\n                                        onClick={() => onCardClick(-1, picklistValue)}\n                                    >\n                                        <CardContent>\n                                            {getCardContent(jsonContent[picklistValue])}\n                                        </CardContent>\n                                    </Card>\n                                    <Button\n                                        className={classes.button}\n                                        color='primary'\n                                        onClick={() => onSeeCardConnection(-1, picklistValue)}\n                                        size='small'\n                                    >\n                                        {t('card.connections')}\n                                    </Button>\n                                </Box>\n                            )}\n                            {Array.isArray(jsonContent[picklistValue]) && jsonContent[picklistValue].map((value, index) => (\n                                <Box\n                                    key={index}\n                                    className={classes.cardContainer}\n                                >\n                                    <Card\n                                        className={clsx(classes.card, { [classes.selectedCards]: selectedCards[index] })}\n                                        onClick={() => onCardClick(index, picklistValue)}\n                                    >\n                                        <CardContent>\n                                            {getCardContent(value)}\n                                        </CardContent>\n                                    </Card>\n                                    <Button\n                                        className={classes.button}\n                                        color='primary'\n                                        onClick={() => onSeeCardConnection(index, picklistValue)}\n                                        size='small'\n                                    >\n                                        {t('card.connections')}\n                                    </Button>\n                                </Box>\n                            ))}\n                        </Box>\n                    )}\n                    <FileUploader\n                        acceptedFiles={['application/json']}\n                        className={classes.loadButton}\n                        onSave={onJsonFileUpload}\n                        title={t('jsonViewer.loadJson')}\n                    />\n                </Box>\n                <Box className={classes.svgViewer}>\n                    <Box className={classes.svgButtonTopButtonContainer}>\n                        <Button\n                            className={classes.assignButton}\n                            color='primary'\n                            disabled={_.isEmpty(selectedCardsRef.current) || _.isEmpty(selectedSvgElementsRef.current)}\n                            endIcon={<CheckIcon />}\n                            onClick={onAssign}\n                            variant='contained'\n                        >\n                            {t('svgViewer.assign')}\n                        </Button>\n                        <Box>\n                            <Tooltip title={t('svgViewer.reset')}>\n                                <IconButton\n                                    disabled={!jsonContent && !svgContent}\n                                    onClick={onRefresh}\n                                >\n                                    <RefreshIcon />\n                                </IconButton>\n                            </Tooltip>\n                            <Tooltip title={t('svgViewer.download')}>\n                                <IconButton\n                                    disabled={!jsonContent || !svgContent}\n                                    onClick={onDownload}\n                                >\n                                    <DownloadIcon />\n                                </IconButton>\n                            </Tooltip>\n                        </Box>\n                    </Box>\n                    {svgContent && (\n                        <Box\n                            className={classes.svgContainer}\n                            id='workspace-svg-container'\n                        >\n                            <SVG\n                                className={classes.svg}\n                                id='workspace-svg'\n                                src={svgContent}\n                            />\n                        </Box>\n                    )}\n                    <FileUploader\n                        acceptedFiles={['image/svg+xml']}\n                        className={classes.loadButton}\n                        onSave={onSvgFileUpload}\n                        title={t('svgViewer.loadSvg')}\n                    />\n                    {Object.keys(selectedSvgElements).length === 1 && (\n                        <Button\n                            className={classes.svgConnectionsButton}\n                            color='primary'\n                            onClick={onSeeSvgConnection}\n                        >\n                            {t('svgViewer.connections')}\n                        </Button>\n                    )}\n                </Box>\n            </Box>\n            <Confirmation\n                content={t('confirmation.resetWarning')}\n                onClose={() => setOpenConfirmation(false)}\n                onConfirm={onRefreshConfirm}\n                open={openConfirmation}\n            />\n            <Dialog\n                fullScreen\n                onClose={() => setOpenJsonPreview(false)}\n                open={openJsonPreview}\n            >\n                <Box\n                    pl={1}\n                    pr={1}\n                >\n                    <Highlight className={clsx('json', classes.jsonView)}>\n                        {JSON.stringify(jsonContent, null, 2)}\n                    </Highlight>\n                </Box>\n            </Dialog>\n            {Object.keys(selectedSvgElements).length === 1 && (\n                <Dialog\n                    onClose={() => setOpenSvgToCardConnectionPreview(false)}\n                    open={openSvgToCardConnectionPreview}\n                >\n                    {getConnectedCardsForSvg()}\n                </Dialog>\n            )}\n            {jsonContent && !_.isEmpty(selectedPopup)\n                && (\n                    <Dialog\n                        onClose={() => setOpenCardToSvgConnectionPreview(false)}\n                        open={openCardToSvgConnectionPreview}\n                    >\n                        <Box className={classes.svgPopup}>\n                            <SVG\n                                className={classes.svg}\n                                id='popup-svg'\n                                src={svgContent}\n                            />\n                        </Box>\n                        <DialogActions className={classes.svgPopup}>\n                            <Button\n                                autoFocus\n                                className={classes.button}\n                                color='primary'\n                                disabled={\n                                    _.isEmpty((selectedPopup.index === -1\n                                        ? jsonContent[selectedPopup.key]\n                                        : jsonContent[selectedPopup.key][selectedPopup.index]).svg)\n                                }\n                                inline\n                                onClick={onRemoveCardConnection}\n                                size='small'\n                            >\n                                {t('svgPopup.removeConnections')}\n                            </Button>\n                        </DialogActions>\n                    </Dialog>\n                )}\n        </>\n    );\n}\n\nViewer.propTypes = {};\n\nViewer.defaultProps = {};\n\nexport default Viewer;\n","import React, { useState } from 'react';\nimport {\n    Menu,\n    MenuItem,\n    Box,\n    Typography,\n} from '@material-ui/core';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\n\nexport const useStyles = makeStyles(() => ({\n    root: {\n        marginBottom: 'auto',\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignItems: 'center',\n        outlineStyle: 'none',\n        cursor: 'pointer',\n        width: 180,\n        height: 64,\n    },\n}));\n\nfunction UserMenu({ displayName, dropdowns }) {\n    const [anchorEl, setAnchorEl] = useState(null);\n    const handleOpen = event => setAnchorEl(event.currentTarget);\n    const handleClose = () => setAnchorEl(null);\n    const classes = useStyles();\n    dropdowns = dropdowns.filter(dropdown => !!dropdown);\n    const hasDropdowns = dropdowns && dropdowns.length !== 0;\n\n    return (\n        <Box>\n            <Box\n                className={classes.root}\n                onClick={handleOpen}\n                onKeyDown={() => {}}\n                role='menuitem'\n                tabIndex={0}\n            >\n                <Typography variant='h6'>{displayName}</Typography>\n                {hasDropdowns && <ArrowDropDownIcon />}\n            </Box>\n            {hasDropdowns\n                && (\n                    <Menu\n                        anchorEl={anchorEl}\n                        anchorOrigin={{\n                            vertical: 'bottom',\n                            horizontal: 'center',\n                        }}\n                        elevation={2}\n                        getContentAnchorEl={null}\n                        keepMounted\n                        onClose={handleClose}\n                        open={Boolean(anchorEl)}\n                        transformOrigin={{\n                            vertical: 'top',\n                            horizontal: 'center',\n                        }}\n                    >\n                        {dropdowns.map((dropdown, index) => (\n                            <MenuItem\n                                key={index}\n                                disabled={dropdown.disabled}\n                                onClick={(...args) => {\n                                    typeof dropdown.handler === 'function' && dropdown.handler(...args);\n                                    handleClose();\n                                }}\n                            >\n                                {dropdown.Icon}\n                                <Box\n                                    display='inline'\n                                    pl={2}\n                                >\n                                    {dropdown.title}\n                                </Box>\n                            </MenuItem>\n                        ))}\n                    </Menu>\n                )}\n        </Box>\n    );\n}\n\nUserMenu.propTypes = {\n    dropdowns: PropTypes.array,\n    displayName: PropTypes.string.isRequired,\n};\n\nUserMenu.defaultProps = { dropdowns: [] };\n\nexport default UserMenu;\n","import React from 'react';\nimport clsx from 'clsx';\nimport {\n    AppBar,\n    Toolbar,\n    Box,\n    Typography,\n    Link,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n    Brightness2 as LightModeIcon,\n    Flare as DarkModeIcon,\n} from '@material-ui/icons';\nimport { useTranslation } from 'react-i18next';\nimport Logo from '../Logo';\nimport Confirmation from '../Confirmation';\nimport {\n    useWindowSize,\n    useActions,\n    useStore,\n} from '../../hooks';\nimport ToolViewer from '../ToolViewer';\nimport UserMenu from './UserMenu';\n\nexport const useStyles = makeStyles(theme => ({\n    toolbar: {\n        paddingLeft: 0,\n        paddingRight: 0,\n    },\n    appBar: {\n        marginLeft: theme.spacing(2),\n        width: '100%',\n        display: 'flex',\n        justifyContent: 'space-between',\n        // Todo need to use appBar height from theme\n        height: 64,\n        alignItems: 'center',\n    },\n    content: {\n        height: '100vh',\n        transition: theme.transitions.create(['margin', 'width'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n        // TODO need to use appBar height from themes.\n        paddingTop: 64,\n    },\n}));\n\nfunction Main() {\n    const classes = useStyles();\n    const dimensions = useWindowSize();\n    const theme = useStore('theme');\n    const themeActions = useActions('theme');\n    const isDark = theme.palette.type === 'dark';\n    const [t] = useTranslation('common');\n    const [openConfirmation, setOpenConfirmation] = React.useState(false);\n\n    const switchThemeMode = () => themeActions.setMode(!isDark ? 'dark' : 'light');\n\n    return (\n        <>\n            <title>{t('title')}</title>\n            <AppBar position='fixed'>\n                <Toolbar className={classes.toolbar}>\n                    <Logo />\n                    <Box className={classes.appBar}>\n                        <Typography\n                            className={\n                                clsx(\n                                    { [classes.hide]: dimensions.width < 690 },\n                                )\n                            }\n                            variant='h5'\n                        >\n                            <Link\n                                color='inherit'\n                                href='/'\n                                style={{ textDecoration: 'none' }}\n                            >\n                                {t('appBar.title')}\n                            </Link>\n                        </Typography>\n                        <UserMenu\n                            displayName={t('appBar.settings')}\n                            dropdowns={[\n                                {\n                                    title: `${!isDark ? t('appBar.dark') : t('appBar.light')} ${t('appBar.theme')}`,\n                                    Icon: !isDark ? <LightModeIcon /> : <DarkModeIcon />,\n                                    handler: switchThemeMode,\n                                },\n                            ]}\n                        />\n                    </Box>\n                </Toolbar>\n            </AppBar>\n            <main className={classes.content}>\n                <ToolViewer />\n            </main>\n            <Confirmation\n                content={t('appBar.sessionClearWarning')}\n                onClose={() => setOpenConfirmation(false)}\n                onConfirm={() => {\n                    setOpenConfirmation(false);\n                }}\n                open={openConfirmation}\n            />\n        </>\n    );\n}\n\nexport default Main;\n","import React from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Alert from '@material-ui/lab/Alert';\nimport PropTypes from 'prop-types';\n\nconst Toast = ({\n    vertical,\n    horizontal,\n    duration,\n    open,\n    type,\n    children,\n    onClose,\n}) => (\n    <Snackbar\n        anchorOrigin={{\n            vertical,\n            horizontal,\n        }}\n        autoHideDuration={duration}\n        onClose={onClose}\n        open={open}\n    >\n        <Alert\n            onClose={onClose}\n            severity={type}\n        >\n            {children}\n        </Alert>\n    </Snackbar>\n);\n\nToast.propTypes = {\n    vertical: PropTypes.oneOf(['top', 'bottom']).isRequired,\n    horizontal: PropTypes.oneOf(['left', 'right', 'center']).isRequired,\n    duration: PropTypes.number.isRequired,\n    open: PropTypes.bool.isRequired,\n    type: PropTypes.oneOf(['success', 'info', 'warning', 'error', undefined]).isRequired,\n    children: PropTypes.node.isRequired,\n    onClose: PropTypes.func.isRequired,\n};\n\nexport default Toast;\n","import React from 'react';\nimport { noop } from 'lodash';\nimport PropTypes from 'prop-types';\nimport Toast from '../Toast';\n\nconst Context = React.createContext({\n    error: noop,\n    success: noop,\n    warning: noop,\n    info: noop,\n});\n\nconst ToastContext = ({\n    duration = 6000,\n    orientation = 'bottom-right',\n    children,\n}) => {\n    const orientationFragment = orientation.split('-');\n    const initialState = {\n        open: false,\n        message: '',\n        type: 'info',\n        vertical: orientationFragment[0],\n        horizontal: orientationFragment[1],\n    };\n    const [state, setState] = React.useState(initialState);\n    const stateRef = React.useRef(initialState);\n    stateRef.current = state;\n    const handleClose = (_event, reason) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n        setState(s => ({\n            ...s,\n            open: false,\n        }));\n    };\n    const success = (message, orientation) => {\n        orientation = orientation || `${stateRef.current.vertical}-${stateRef.current.horizontal}`;\n        const orientationFragment = orientation.split('-');\n        setState(s => ({\n            ...s,\n            open: true,\n            message,\n            type: 'success',\n            vertical: orientationFragment[0],\n            horizontal: orientationFragment[1],\n        }));\n    };\n    const warning = (message, orientation) => {\n        orientation = orientation || `${stateRef.current.vertical}-${stateRef.current.horizontal}`;\n        const orientationFragment = orientation.split('-');\n        setState(s => ({\n            ...s,\n            open: true,\n            message,\n            type: 'warning',\n            vertical: orientationFragment[0],\n            horizontal: orientationFragment[1],\n        }));\n    };\n    const error = (message, orientation) => {\n        orientation = orientation || `${stateRef.current.vertical}-${stateRef.current.horizontal}`;\n        const orientationFragment = orientation.split('-');\n        setState(s => ({\n            ...s,\n            open: true,\n            message,\n            type: 'error',\n            vertical: orientationFragment[0],\n            horizontal: orientationFragment[1],\n        }));\n    };\n    const info = (message, orientation) => {\n        orientation = orientation || `${stateRef.current.vertical}-${stateRef.current.horizontal}`;\n        const orientationFragment = orientation.split('-');\n        setState(s => ({\n            ...s,\n            open: true,\n            message,\n            type: 'info',\n            vertical: orientationFragment[0],\n            horizontal: orientationFragment[1],\n        }));\n    };\n    return (\n        <Context.Provider\n            value={{\n                success,\n                error,\n                info,\n                warning,\n            }}\n        >\n            {children}\n            <Toast\n                duration={duration}\n                horizontal={state.horizontal}\n                onClose={handleClose}\n                open={state.open}\n                type={state.type}\n                vertical={state.vertical}\n            >\n                {state.message}\n            </Toast>\n        </Context.Provider>\n    );\n};\n\nexport const useToast = () => React.useContext(Context);\n\nToastContext.propTypes = {\n    duration: PropTypes.number,\n    orientation: PropTypes.string,\n    children: PropTypes.node.isRequired,\n};\n\nToastContext.defaultProps = {\n    duration: 6000,\n    orientation: 'bottom-right',\n};\n\nexport default ToastContext;\n","import React from 'react';\nimport { CssBaseline } from '@material-ui/core';\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport Main from '../Main';\nimport ToastProvider from '../ToastContext';\nimport { useStore } from '../../hooks';\n\nfunction Root() {\n    const theme = useStore('theme');\n\n    return (\n        <ThemeProvider theme={createMuiTheme(theme)}>\n            <ToastProvider orientation='bottom-left'>\n                <CssBaseline />\n                <Main />\n            </ToastProvider>\n        </ThemeProvider>\n\n    );\n}\n\nexport default Root;\n","import Root from './Root';\n\nexport default Root;\n","import store from './store';\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport { I18nextProvider } from 'react-i18next';\nimport i18next from 'i18next';\nimport Root from './components/Root';\nimport store from './redux/store';\nimport commonEn from './translations/en/common.json';\n\ni18next.init({\n    interpolation: { escapeValue: false },\n    lng: 'en',\n    resources: { en: { common: commonEn } },\n});\n\nfunction App() {\n    return (\n        <I18nextProvider i18n={i18next}>\n            <ReduxProvider store={store}>\n                <Root />\n            </ReduxProvider>\n        </I18nextProvider>\n    );\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import _ from 'lodash';\n\nclass StorageService {\n    get = () => {\n        try {\n            const $appData = localStorage.getItem('$appData');\n            if (typeof $appData === 'string' && $appData) {\n                return JSON.parse($appData);\n            }\n            return undefined;\n        } catch (err) {\n            return undefined;\n        }\n    }\n\n    getItem = key => _.get(this.get(), key, null)\n\n    set = data => {\n        try { localStorage.setItem('$appData', JSON.stringify(data)); } catch (err) {}\n    }\n}\n\nconst storageService = new StorageService();\n\nObject.freeze(storageService);\n\nexport default storageService;\n\nexport { StorageService };\n","import { createAction } from '@reduxjs/toolkit';\n\nconst reset = createAction('reset');\n\nexport { reset };\n","import { createSlice } from '@reduxjs/toolkit';\nimport { reset } from '../actions';\n\nconst initialState = {\n    palette: {\n        type: window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light',\n        primary: {\n            main: '#CF112D',\n            contrastText: '#ffffff',\n        },\n        secondary: {\n            main: '#4D4D4D',\n            contrastText: '#ffffff',\n        },\n    },\n};\n\nexport default createSlice({\n    name: 'theme',\n    initialState,\n    reducers: {\n        setMode: (state, action) => {\n            state.palette.type = action.payload;\n        },\n    },\n    extraReducers: {\n        [reset]: state => {\n            Object.assign(state, initialState);\n        },\n    },\n});\n","import { createSlice } from '@reduxjs/toolkit';\nimport { reset } from '../actions';\n\nconst initialState = {\n    jsonContent: '',\n    svgContent: '',\n    picklistValue: '',\n    picklistOptions: [],\n    selecedCards: {},\n    selectedSvgElements: {},\n};\n\nexport default createSlice({\n    name: 'tool',\n    initialState,\n    reducers: {\n        setJsonContent: (state, action) => {\n            state.jsonContent = action.payload;\n        },\n        setSvgContent: (state, action) => {\n            state.svgContent = action.payload;\n        },\n        setPicklistValue: (state, action) => {\n            state.picklistValue = action.payload;\n        },\n        setPicklistOptions: (state, action) => {\n            state.picklistOptions = action.payload;\n        },\n        setSelectedCards: (state, action) => {\n            state.selectedCards = action.payload;\n        },\n        setSelectedSvgElements: (state, action) => {\n            state.selectedSvgElements = action.payload;\n        },\n    },\n    extraReducers: {\n        [reset]: state => {\n            Object.assign(state, initialState);\n        },\n    },\n});\n","import _ from 'lodash';\nimport theme from './theme';\nimport tool from './tool';\nimport { reset } from '../actions';\n\nexport const actions = {\n    theme: theme.actions,\n    tool: _.assign(tool.actions, { reset }),\n};\n\nexport const reducers = {\n    theme: theme.reducer,\n    tool: tool.reducer,\n};\n"],"sourceRoot":""}